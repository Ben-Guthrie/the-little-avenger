[gd_scene load_steps=16 format=3 uid="uid://cqx28vp8kokba"]

[ext_resource type="Shader" path="res://shaders/haunt-outline.gdshader" id="1_fgsyw"]
[ext_resource type="PackedScene" uid="uid://y352sddbvrud" path="res://components/move_component.tscn" id="2_aogtl"]
[ext_resource type="Texture2D" uid="uid://fn7hcj6iq0jh" path="res://shaders/color_gradient_texture_1d.tres" id="2_bgobx"]
[ext_resource type="Script" path="res://characters/timmy.gd" id="2_njsxq"]
[ext_resource type="Texture2D" uid="uid://caqsdsty08tfr" path="res://shaders/vertical_gradient_texture_1d.tres" id="3_h3l73"]
[ext_resource type="Script" path="res://components/hauntable_component.gd" id="5_ubbqc"]
[ext_resource type="PackedScene" uid="uid://dikgr2ldyjqsw" path="res://haunt/haunt_ui.tscn" id="6_vip5t"]
[ext_resource type="PackedScene" uid="uid://duttm8qe2hx5g" path="res://components/collision_component.tscn" id="7_ghaqc"]
[ext_resource type="Texture2D" uid="uid://c3da5m2rc2hkt" path="res://assets/16x16-RPG-characters/16x16-RPG-characters/sprites/new-style/chibi-layered.png" id="10_8ax03"]
[ext_resource type="SpriteFrames" uid="uid://cf34llq4pi0wr" path="res://characters/timmy.tres" id="10_vubqs"]
[ext_resource type="PackedScene" uid="uid://cqnds800uko31" path="res://components/trigger_component.tscn" id="11_sghsb"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_gjqde"]
shader = ExtResource("1_fgsyw")
shader_parameter/size_effect = 12.0
shader_parameter/speed = 1.2
shader_parameter/highlight_strength = 0.5
shader_parameter/color_mode_toggle = true
shader_parameter/is_horizontal = false
shader_parameter/pause_duration = 0.2
shader_parameter/texture_size = Vector2(16, 16)
shader_parameter/onoff = false
shader_parameter/vertical_gradient = ExtResource("3_h3l73")
shader_parameter/color_gradient = ExtResource("2_bgobx")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_20m3x"]
size = Vector2(16, 16)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_nk4i7"]
shader = ExtResource("1_fgsyw")
shader_parameter/size_effect = 12.0
shader_parameter/speed = 1.2
shader_parameter/highlight_strength = 0.5
shader_parameter/color_mode_toggle = true
shader_parameter/is_horizontal = false
shader_parameter/pause_duration = 0.2
shader_parameter/texture_size = Vector2(16, 16)
shader_parameter/onoff = false
shader_parameter/vertical_gradient = ExtResource("3_h3l73")
shader_parameter/color_gradient = ExtResource("2_bgobx")

[sub_resource type="AtlasTexture" id="AtlasTexture_4tmwd"]
atlas = ExtResource("10_8ax03")
region = Rect2(2, 16, 12, 10)

[node name="Timmy" type="Node2D"]
material = SubResource("ShaderMaterial_gjqde")
script = ExtResource("2_njsxq")
metadata/is_timmy = true

[node name="MoveComponent" parent="." node_paths=PackedStringArray("self_node") instance=ExtResource("2_aogtl")]
self_node = NodePath("..")

[node name="Shadow" type="Sprite2D" parent="."]
position = Vector2(0, 3)

[node name="HauntableComponent" type="Area2D" parent="." node_paths=PackedStringArray("sprite") groups=["hauntable"]]
script = ExtResource("5_ubbqc")
sprite = NodePath("../AnimatedSprite2D")

[node name="CollisionShape2D" type="CollisionShape2D" parent="HauntableComponent"]
shape = SubResource("RectangleShape2D_20m3x")

[node name="HauntUI" parent="HauntableComponent" instance=ExtResource("6_vip5t")]
visible = false
custom_minimum_size = Vector2(64, 32)
offset_left = -32.0
offset_right = 32.0
offset_bottom = 43.0

[node name="Move" parent="HauntableComponent/HauntUI/Options" index="0" node_paths=PackedStringArray("haunt_target")]
haunt_target = NodePath("../../../..")
energy_cost = 2

[node name="CollisionComponent" parent="." instance=ExtResource("7_ghaqc")]

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
material = SubResource("ShaderMaterial_nk4i7")
sprite_frames = ExtResource("10_vubqs")
animation = &"idle_down"
offset = Vector2(0, -4)

[node name="Drowning" type="Sprite2D" parent="."]
visible = false
position = Vector2(0, -7)
texture = SubResource("AtlasTexture_4tmwd")

[node name="TriggerComponent" parent="." instance=ExtResource("11_sghsb")]

[connection signal="input_event" from="HauntableComponent" to="HauntableComponent" method="_on_input_event"]
[connection signal="mouse_entered" from="HauntableComponent" to="HauntableComponent" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="HauntableComponent" to="HauntableComponent" method="_on_mouse_exited"]
[connection signal="haunted" from="HauntableComponent/HauntUI" to="HauntableComponent" method="_on_haunt_ui_haunted"]
[connection signal="selected" from="HauntableComponent/HauntUI" to="HauntableComponent" method="_on_haunt_ui_selected"]

[editable path="HauntableComponent/HauntUI"]
